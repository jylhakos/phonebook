{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","services/personService.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handleNameChange","newPhone","handlePhoneChange","onSubmit","value","onChange","type","Person","id","person","phone","handleDeletePerson","console","log","onClick","e","Persons","persons","filtered","style","padding","map","name","Filter","handleFilter","baseUrl","axios","get","newObject","post","delete","Notification","successMessage","className","App","useState","setPersons","setNewName","setNewPhone","counter","setCounter","setSuccessMessage","setFiltered","useEffect","personService","then","response","data","max","forEach","object","event","preventDefault","result","target","toLowerCase","filter","indexOf","personObject","date","Date","toISOString","important","Math","random","personExists","length","concat","setTimeout","alert","window","confirm","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f91a8677.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, handleNameChange, newPhone, handlePhoneChange }) => {\n\n  return ( \n  \t<form onSubmit={addPerson}>\n      <div>\n        <div>\n          <label>Name: </label><input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n          <label>Phone: </label><input value={newPhone} onChange={handlePhoneChange}/>\n        </div>\n        \n        </div>\n        <div><button type=\"submit\">Add</button></div>\n      </form>\n    )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({ id, person, phone, handleDeletePerson }) => {\n\n  console.log('id', id, 'person', person, 'phone', phone)\n\n  return ( \n      person != null ? ( <tr><td>{person}</td> <td>{phone}</td> <td><button type=\"submit\" value={id} onClick={(e) => handleDeletePerson(e,person)}>Delete</button></td></tr> ) : null\n      )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons, filtered, handleDeletePerson }) => {\n\n  return (  \n    <div style={{padding:5}}>\n      <table>\n        { filtered.map(person => <Person key={person.id} id={person.id} person={person.name} phone={person.phone} handleDeletePerson={handleDeletePerson}/> )}\n      </table>\n    </div>\n    )\n\n}\n\nexport default Persons","import React from 'react'\nimport Person from './Person'\n\nconst Filter = ({ persons, handleFilter }) => {\n\n  console.log('person', persons.name)\n\n  return ( \n        <div>\n          <label>Filter: </label><input value={persons.name} onChange={handleFilter}/>\n        </div>\n      )\n}\n\nexport default Filter","import axios from 'axios'\n\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst deletePerson = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update,\n  deletePerson: deletePerson,\n}","// $ npx json-server --port 3001 --watch db.json\n// $ npm start\n\nimport React, { useState, useEffect } from 'react'\n//import axios from 'axios';\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personService from './services/personService'\n\nconst Notification = ({successMessage}) => {\n  if ( successMessage === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {successMessage}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([{ person: null, phone: null }])\n\n  const [ newName, setNewName ] = useState('')\n\n  const [ newPhone, setNewPhone ] = useState('')\n\n  const [ counter, setCounter ] = useState(0)\n\n  const [successMessage, setSuccessMessage] = useState(null)\n\n  const [filtered, setFiltered] = useState([]);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n        setFiltered(response.data)\n        let max = 0\n        response.data.forEach((object) => {\n          console.log(object.id);\n          if(object.id > max) {\n            max = object.id\n          }\n        });\n\n        setCounter(max)\n\n        //setCounter(response.data.length)\n      })\n  }, [])\n\n  console.log('counter', counter)\n\n  const handleFilter = (event) => {\n\n    event.preventDefault()\n\n    let value = event.target.value.toLowerCase();\n\n    let result = [];\n\n    console.log('value', value);\n\n    result = persons.filter((person) => {\n\n      console.log('person.name', person.name);\n\n      return person.name.toLowerCase().indexOf(value) !== -1;\n\n    });\n\n    setFiltered(result)\n\n  }\n\n  const addPerson = (event) => {\n\n      event.preventDefault()\n\n      console.log('Clicked', event.target)\n\n      const personObject = {\n        name: newName,\n        phone: newPhone,\n        date: new Date().toISOString(),\n        important: Math.random() < 0.5,\n        id: counter + 1,\n      }\n\n      console.log('personObject', personObject.name, personObject.phone)\n\n      console.log('persons', persons)\n\n      const personExists = persons.filter((person) => person.name === personObject.name)\n\n      console.log('personExists ', personExists)\n\n      if (personExists.length === 0) {\n\n        console.log('personExists.length ', personExists.length)\n\n        //setPersons(persons.concat(personObject))\n\n        // $ npm install axios\n\n        personService.create(personObject)\n        .then(response => {\n\n          console.log('response', response)\n          \n          setPersons(persons.concat(response.data))\n\n          setFiltered(persons.concat(response.data))\n\n          setCounter(personObject.id)\n\n          setSuccessMessage(`Added ${personObject.name}`)\n\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n        })\n      } else {\n        alert(`${newName} is already added to phonebook`)\n      }\n      \n      setNewName('')\n      setNewPhone('')\n    }\n\n    const handleNameChange = (event) => {\n      console.log('handleNameChange', event.target.value)\n      setNewName(event.target.value)\n    }\n\n    const handlePhoneChange = (event) => {\n      console.log('handlePhoneChange', event.target.value)\n      setNewPhone(event.target.value)\n    }\n\n    const handleDeletePerson = (event,person) => {\n\n      event.preventDefault()\n\n      const id = event.target.value;\n\n      console.log('handleDeletePerson', id, person)\n\n      if (window.confirm('Delete ' + person + '?')) {\n\n        personService.deletePerson(id)\n        .then(response => {\n          personService\n          .getAll()\n          .then(response => {\n            setPersons(response.data)\n            setFiltered(response.data)\n          })\n        })\n      }\n    }\n\n    return (\n      <div>\n        <h2>Phonebook</h2>\n        <Notification successMessage={successMessage}/>\n        <Filter persons={persons} handleFilter={handleFilter}/>\n        <h3>Add New</h3>\n        <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newPhone={newPhone} handlePhoneChange={handlePhoneChange}/>\n        <h2>Numbers</h2>\n        <Persons persons={persons} filtered={filtered} handleFilter={handleFilter} handleDeletePerson={handleDeletePerson}/>\n      </div>\n    )\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}